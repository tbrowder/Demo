#!/usr/bin/env raku

use Demo;

=begin comment
my $f1 = "resources/file1";
my $f2 = "resources/file2";
my $f3 = "resources/../lib/Demo.rakumod";
my $f4 = "resources/../t/01-basic.rakutest";
=end comment

my $s;

my $nlines;
if not @*ARGS {
    print qq:to/HERE/;
    Usage: {$*PROGRAM.basename} <number of lines [min 2] > | all

    Shows the contents of the distribution's files.   
    HERE
    exit;
}

my $debug = 0;
my $arg = @*ARGS.shift;
$nlines = $arg ~~ /^\d+$/ ?? $arg !! 0;
++$nlines if $nlines == 1;

my @rpaths = get-resources-paths :$debug;
say "Resource paths:";
say "  $_" for @rpaths;

say "Contents:";
#for $f1, $f2, $f3, $f4 -> $f {
for @rpaths -> $f {
    my $s = get-content $f, :$nlines;
    unless $s {
        say "==File '$f' is not accessible.";
        next;
    }
   
    say "==File '$f':";
    for $s.lines.kv -> $i is copy, $v {
        my $n = sprintf "%2d", ++$i;
        say "    line $n: $v";
    }
    say();
}

